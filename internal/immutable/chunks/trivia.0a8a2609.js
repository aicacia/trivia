var te=Object.defineProperty;var ee=(s,i,o)=>i in s?te(s,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[i]=o;var F=(s,i,o)=>(ee(s,typeof i!="symbol"?i+"":i,o),o);import{w as ne,d as re}from"./index.2ebf1e6a.js";import{a9 as ie}from"./index.b32904f4.js";import{i as oe}from"./index.fc72133f.js";const Ft=new Uint8Array(1),se=new Uint8Array(4),Pt=new Float32Array(1);class ce{writeByte(i){return Ft[0]=i,this.write(Ft)}writeInteger(i){return this.write(oe(se,i))}writeFloat(i){return Pt[0]=i,this.write(new Uint8Array(Pt.buffer))}}function ue(s){return s>>>1&1073741824|s&3221225471}class he extends ce{constructor(){super(...arguments),this.hash=0}finish(){return this.hash}write(i){let o=this.hash;for(let c=0,a=i.length;c<a;c++)o=31*o+i[c];return this.hash=ue(o),this}}function ae(){return new he}const ut=new Set;function fe(s,i=ae){return le(s,i()).finish()}function le(s,i){return Z(s,i),ut.clear(),i}function Z(s,i){return s!=null&&(typeof s=="string"?z(s,i):typeof s=="number"?X(s,i):typeof s=="boolean"?pe(s,i):typeof s=="symbol"?de(s,i):typeof s[Symbol.iterator]=="function"?ge(s,i):typeof s=="function"?ye(s,i):typeof s.length=="number"?we(s,i):at(s,i)),i}function z(s,i){for(const o of s)i.writeInteger(o.charCodeAt(0))}function X(s,i){s%1===0?i.writeInteger(s):i.writeFloat(s)}function pe(s,i){i.writeInteger(s===!0?1:0)}function de(s,i){z(s.toString(),i)}function ge(s,i){let o=0;for(const c of s)Z(c,i),o++;X(o,i)}function ye(s,i){s.prototype!==null&&typeof s.prototype=="object"&&at(s.prototype,i),z(s.name,i),X(s.length,i),z(s.toString(),i)}function we(s,i){const o=Object.getPrototypeOf(s);o!==null&&typeof o=="object"&&typeof o.constructor=="function"&&at(o.constructor,i);for(let c=0,a=s.length;c<a;c++)Z(s[c],i);X(s.length,i)}function at(s,i){if(!ut.has(s)){ut.add(s);let o=0;for(const[c,a]of Object.entries(s))z(c,i),Z(a,i),o++;X(o,i)}}const W="/";class L{constructor(i,o,c){this.graph=i,this.path=o,this.state=c}get(i){return new L(this.graph,this.path+W+i,this.state)}set(i){return this.graph.set(this.path,i),this}delete(){return this.graph.delete(this.path),this}getValue(){return this.graph.getValueAtPath(this.path)}getPath(){return this.path}getNode(){return this.graph.getNodeAtPath(this.path)}getState(){return this.state}on(i){let o=this.getNode();const c=l=>{const p=this.getNode();if(p){const h=p.getValue();o!==p&&(this.graph.listenAtPath(p.getPath(),h===void 0),o=p),l.startsWith(p.getPath())&&i(h)}else o=p};this.graph.on("change",c);const a=o==null?void 0:o.getValue();return this.graph.listenAtPath((o==null?void 0:o.getPath())||this.path,a===void 0),a!==void 0&&i(a),()=>{this.graph.off("change",c)}}once(i){const o=this.on(c=>{o(),i(c)});return this}getWaitMS(){return this.waitMS===void 0?this.graph.getWaitMS():this.waitMS}setWaitMS(i){return this.waitMS=i,this}then(i,o){const c=this.getValue();let a;return c!==void 0?a=Promise.resolve(c):a=new Promise((l,p)=>{const h=this.on(m=>{clearTimeout(g),h(),l(m)}),g=setTimeout(()=>{h(),p(new Error(`Request took longer than ${this.getWaitMS()}ms to resolve`))},this.getWaitMS())}),a.then(i,o)}toJSON(){return{id:this.path,state:this.state}}}class Ct{constructor(i,o,c,a){this.graph=i,this.parent=o,this.key=c,this.state=a}getValue(){return this.graph.getValueAtPath(this.getPath())}getPath(){return this.parent?this.parent.getPath()+W+this.key:this.key}toJSON(){return{state:this.state}}}class q extends Ct{constructor(i,o,c,a,l){super(i,o,c,a),this.value=l}getPath(){return this.value instanceof L?this.value.getPath():super.getPath()}toJSON(){return this.value instanceof L?this.value.toJSON():Object.assign(Object.assign({},super.toJSON()),{value:this.value})}}function me(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Tt={exports:{}};(function(s){var i=Object.prototype.hasOwnProperty,o="~";function c(){}Object.create&&(c.prototype=Object.create(null),new c().__proto__||(o=!1));function a(g,m,y){this.fn=g,this.context=m,this.once=y||!1}function l(g,m,y,w,S){if(typeof y!="function")throw new TypeError("The listener must be a function");var I=new a(y,w||g,S),B=o?o+m:m;return g._events[B]?g._events[B].fn?g._events[B]=[g._events[B],I]:g._events[B].push(I):(g._events[B]=I,g._eventsCount++),g}function p(g,m){--g._eventsCount===0?g._events=new c:delete g._events[m]}function h(){this._events=new c,this._eventsCount=0}h.prototype.eventNames=function(){var m=[],y,w;if(this._eventsCount===0)return m;for(w in y=this._events)i.call(y,w)&&m.push(o?w.slice(1):w);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(y)):m},h.prototype.listeners=function(m){var y=o?o+m:m,w=this._events[y];if(!w)return[];if(w.fn)return[w.fn];for(var S=0,I=w.length,B=new Array(I);S<I;S++)B[S]=w[S].fn;return B},h.prototype.listenerCount=function(m){var y=o?o+m:m,w=this._events[y];return w?w.fn?1:w.length:0},h.prototype.emit=function(m,y,w,S,I,B){var O=o?o+m:m;if(!this._events[O])return!1;var x=this._events[O],M=arguments.length,V,U;if(x.fn){switch(x.once&&this.removeListener(m,x.fn,void 0,!0),M){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,y),!0;case 3:return x.fn.call(x.context,y,w),!0;case 4:return x.fn.call(x.context,y,w,S),!0;case 5:return x.fn.call(x.context,y,w,S,I),!0;case 6:return x.fn.call(x.context,y,w,S,I,B),!0}for(U=1,V=new Array(M-1);U<M;U++)V[U-1]=arguments[U];x.fn.apply(x.context,V)}else{var et=x.length,R;for(U=0;U<et;U++)switch(x[U].once&&this.removeListener(m,x[U].fn,void 0,!0),M){case 1:x[U].fn.call(x[U].context);break;case 2:x[U].fn.call(x[U].context,y);break;case 3:x[U].fn.call(x[U].context,y,w);break;case 4:x[U].fn.call(x[U].context,y,w,S);break;default:if(!V)for(R=1,V=new Array(M-1);R<M;R++)V[R-1]=arguments[R];x[U].fn.apply(x[U].context,V)}}return!0},h.prototype.on=function(m,y,w){return l(this,m,y,w,!1)},h.prototype.once=function(m,y,w){return l(this,m,y,w,!0)},h.prototype.removeListener=function(m,y,w,S){var I=o?o+m:m;if(!this._events[I])return this;if(!y)return p(this,I),this;var B=this._events[I];if(B.fn)B.fn===y&&(!S||B.once)&&(!w||B.context===w)&&p(this,I);else{for(var O=0,x=[],M=B.length;O<M;O++)(B[O].fn!==y||S&&!B[O].once||w&&B[O].context!==w)&&x.push(B[O]);x.length?this._events[I]=x.length===1?x[0]:x:p(this,I)}return this},h.prototype.removeAllListeners=function(m){var y;return m?(y=o?o+m:m,this._events[y]&&p(this,y)):(this._events=new c,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=o,h.EventEmitter=h,s.exports=h})(Tt);var xe=Tt.exports;const ft=me(xe);class k extends Ct{constructor(){super(...arguments),this.children={}}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{children:Object.entries(this.children).reduce((i,[o,c])=>(c instanceof k?i[o]={state:c.state,id:c.getPath()}:i[o]=c.toJSON(),i),{})})}}class Ee extends ft{constructor(){super(...arguments),this.state=Date.now(),this.entries={},this.listeningPaths=new Set,this.waitMS=5e3,this.shouldOverwriteFn=Ie}setShouldOverwriteFn(i){return this.shouldOverwriteFn=i,this}getShouldOverwriteFn(){return this.shouldOverwriteFn}setWaitMS(i){return this.waitMS=i,this}getWaitMS(){return this.waitMS}getEntries(){return this.entries}getState(){return this.state}get(i){return new L(this,i,this.state)}getValueAtPath(i){const o=this.getNodeAtPath(i);let c;return o?(c=Ot(this,o),c===void 0&&this.listenAtPath(i)):this.listenAtPath(i),c}getNodeAtPath(i){return Nt(this,i,{})}set(i,o){return this.state=Date.now(),this.setPathInternal(i,o,this.state),this}delete(i){return this.state=Date.now(),this.deletePathInternal(i,this.state),this}merge(i,o){if(this.isListening(i)){const c=Date.now();if("children"in o)for(const[a,l]of Object.entries(o.children))this.mergePathInternal(i+W+a,l,c);else"delete"in o?this.mergeDeletePathInternal(i,o.state,c):this.mergePathInternal(i,o,c)}return this}listenAtPath(i,o=!0){return o&&this.emit("get",i),this.listeningPaths.add(i),this}isListening(i){for(const o of this.listeningPaths)if(i.startsWith(o))return!0;return!1}toJSON(){return{state:this.state,entries:Object.entries(this.entries).reduce((i,[o,c])=>(i[o]=c.toJSON(),i),{})}}mergePathInternal(i,o,c){const a=o.state;return a>c?setTimeout(()=>this.mergePathEdgeInternal(i,o),a-c):this.mergePathEdgeInternal(i,o),this}mergePathEdgeInternal(i,o){const c=o.state,a=this.getNodeAtPath(i),l="value"in o?o.value:new L(this,o.id,c);if(a instanceof q)this.shouldOverwriteFn(a.value,a.state,l,c)&&(a.value=l,a.state=c,this.emit("change",a.getPath(),a.toJSON()));else if(a instanceof k){if(this.shouldOverwriteFn(new L(this,a.getPath(),c),a.state,l,c)){const p=this.createEdgeAt(i,c);p.value=l,this.emit("change",p.getPath(),p.toJSON())}}else{const p=this.createEdgeAt(i,c);p.value=l,this.emit("change",p.getPath(),p.toJSON())}return this}mergeDeletePathInternal(i,o,c){return o>c?setTimeout(()=>this.mergeDeletePathEdgeInternal(i,o),o-c):this.mergeDeletePathEdgeInternal(i,o),this}mergeDeletePathEdgeInternal(i,o){const[c,a]=ot(i),l=this.getNodeAtPath(i),p=c?this.getNodeAtPath(c):null;return l&&l.state>=o&&p instanceof k&&(delete p.children[a],this.emit("change",c,p.toJSON())),this}setPathInternal(i,o,c){if(o instanceof L)this.setEdgePathInternal(i,o,c);else if(o!==null&&typeof o=="object")for(const[a,l]of Object.entries(o))this.setPathInternal(i+W+a,l,c);else this.setEdgePathInternal(i,o,c)}setEdgePathInternal(i,o,c){const a=this.createEdgeAt(i,c);a.value=o;const l=a.getPath(),p=a.toJSON();return this.emit("change",l,p),this.emit("set",l,p),a}createNodeAt(i,o){const c=i.split(W),a=c.shift();let l=this.entries[a];return l instanceof k||(l=new k(this,null,a,o),this.entries[a]=l),c.reduce((p,h)=>{const g=p.children[h];if(g instanceof k)return g;if(g instanceof q&&g.value instanceof L){const y=g.value.getNode();if(y instanceof k)return y}const m=new k(this,p,h,o);return p.children[h]=m,m},l)}createEdgeAt(i,o){const[c,a]=ot(i),l=c?this.createNodeAt(c,o):null;let p=l==null?void 0:l.children[a];return p instanceof q?(p.state=o,p):(p=new q(this,l,a,o,null),l?l.children[a]=p:this.entries[a]=p,p)}deletePathInternal(i,o){const[c,a]=ot(i),l=c?this.createNodeAt(c,o):null;l&&(delete l.children[a],this.emit("change",i,{state:o,delete:!0}),this.emit("set",i,{state:o,delete:!0}))}}function ot(s){const i=s.lastIndexOf("/");return i===-1?[void 0,s]:[s.substring(0,i),s.substring(i+1)]}function Nt(s,i,o){const c=o[i];if(c!==void 0)return c||void 0;{const a=i.split(W),l=a.shift(),p=s.getEntries()[l];return p&&a.length?(o[l]=p,ht(s,l,p,a,o)):p}}function ht(s,i,o,c,a){if(o instanceof k){const l=c.shift();if(l){const p=o.children[l],h=i+W+l;if(p)return a[h]=p,ht(s,h,p,c,a);a[h]=null;return}else return a[i]=o,o}else if(o.value instanceof L){const l=o.value.getPath(),p=Nt(s,l,a);if(p&&p!==o)return ht(s,i,p,c,a);a[l]=null;return}else return a[i]=o,o}function Ot(s,i,o=new Set){if(i)if(i instanceof k){const c={};for(const[a,l]of Object.entries(i.children)){const p=l instanceof q?l.value:c[a]=new L(s,l.getPath(),l.state);c[a]=p}return c}else return i.value instanceof L?o.has(i.value.getPath())?void 0:(o.add(i.value.getPath()),Ot(s,i.value.getNode(),o)):i.value;else return}function Ie(s,i,o,c){return c>=i&&(i===c?JSON.stringify(o).length>JSON.stringify(s).length:!0)}var bt={},tt={};tt.byteLength=Ae;tt.toByteArray=Pe;tt.fromByteArray=Ce;var J=[],D=[],Be=typeof Uint8Array<"u"?Uint8Array:Array,st="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Y=0,Se=st.length;Y<Se;++Y)J[Y]=st[Y],D[st.charCodeAt(Y)]=Y;D["-".charCodeAt(0)]=62;D["_".charCodeAt(0)]=63;function Rt(s){var i=s.length;if(i%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=s.indexOf("=");o===-1&&(o=i);var c=o===i?0:4-o%4;return[o,c]}function Ae(s){var i=Rt(s),o=i[0],c=i[1];return(o+c)*3/4-c}function Fe(s,i,o){return(i+o)*3/4-o}function Pe(s){var i,o=Rt(s),c=o[0],a=o[1],l=new Be(Fe(s,c,a)),p=0,h=a>0?c-4:c,g;for(g=0;g<h;g+=4)i=D[s.charCodeAt(g)]<<18|D[s.charCodeAt(g+1)]<<12|D[s.charCodeAt(g+2)]<<6|D[s.charCodeAt(g+3)],l[p++]=i>>16&255,l[p++]=i>>8&255,l[p++]=i&255;return a===2&&(i=D[s.charCodeAt(g)]<<2|D[s.charCodeAt(g+1)]>>4,l[p++]=i&255),a===1&&(i=D[s.charCodeAt(g)]<<10|D[s.charCodeAt(g+1)]<<4|D[s.charCodeAt(g+2)]>>2,l[p++]=i>>8&255,l[p++]=i&255),l}function Ue(s){return J[s>>18&63]+J[s>>12&63]+J[s>>6&63]+J[s&63]}function _e(s,i,o){for(var c,a=[],l=i;l<o;l+=3)c=(s[l]<<16&16711680)+(s[l+1]<<8&65280)+(s[l+2]&255),a.push(Ue(c));return a.join("")}function Ce(s){for(var i,o=s.length,c=o%3,a=[],l=16383,p=0,h=o-c;p<h;p+=l)a.push(_e(s,p,p+l>h?h:p+l));return c===1?(i=s[o-1],a.push(J[i>>2]+J[i<<4&63]+"==")):c===2&&(i=(s[o-2]<<8)+s[o-1],a.push(J[i>>10]+J[i>>4&63]+J[i<<2&63]+"=")),a.join("")}var lt={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */lt.read=function(s,i,o,c,a){var l,p,h=a*8-c-1,g=(1<<h)-1,m=g>>1,y=-7,w=o?a-1:0,S=o?-1:1,I=s[i+w];for(w+=S,l=I&(1<<-y)-1,I>>=-y,y+=h;y>0;l=l*256+s[i+w],w+=S,y-=8);for(p=l&(1<<-y)-1,l>>=-y,y+=c;y>0;p=p*256+s[i+w],w+=S,y-=8);if(l===0)l=1-m;else{if(l===g)return p?NaN:(I?-1:1)*(1/0);p=p+Math.pow(2,c),l=l-m}return(I?-1:1)*p*Math.pow(2,l-c)};lt.write=function(s,i,o,c,a,l){var p,h,g,m=l*8-a-1,y=(1<<m)-1,w=y>>1,S=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=c?0:l-1,B=c?1:-1,O=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(h=isNaN(i)?1:0,p=y):(p=Math.floor(Math.log(i)/Math.LN2),i*(g=Math.pow(2,-p))<1&&(p--,g*=2),p+w>=1?i+=S/g:i+=S*Math.pow(2,1-w),i*g>=2&&(p++,g/=2),p+w>=y?(h=0,p=y):p+w>=1?(h=(i*g-1)*Math.pow(2,a),p=p+w):(h=i*Math.pow(2,w-1)*Math.pow(2,a),p=0));a>=8;s[o+I]=h&255,I+=B,h/=256,a-=8);for(p=p<<a|h,m+=a;m>0;s[o+I]=p&255,I+=B,p/=256,m-=8);s[o+I-B]|=O*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(s){const i=tt,o=lt,c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=h,s.SlowBuffer=V,s.INSPECT_MAX_BYTES=50;const a=2147483647;s.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=l(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const n=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(n,t),n.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function p(n){if(n>a)throw new RangeError('The value "'+n+'" is invalid for option "size"');const t=new Uint8Array(n);return Object.setPrototypeOf(t,h.prototype),t}function h(n,t,e){if(typeof n=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(n)}return g(n,t,e)}h.poolSize=8192;function g(n,t,e){if(typeof n=="string")return S(n,t);if(ArrayBuffer.isView(n))return B(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if($(n,ArrayBuffer)||n&&$(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($(n,SharedArrayBuffer)||n&&$(n.buffer,SharedArrayBuffer)))return O(n,t,e);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const r=n.valueOf&&n.valueOf();if(r!=null&&r!==n)return h.from(r,t,e);const u=x(n);if(u)return u;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return h.from(n[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}h.from=function(n,t,e){return g(n,t,e)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function m(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function y(n,t,e){return m(n),n<=0?p(n):t!==void 0?typeof e=="string"?p(n).fill(t,e):p(n).fill(t):p(n)}h.alloc=function(n,t,e){return y(n,t,e)};function w(n){return m(n),p(n<0?0:M(n)|0)}h.allocUnsafe=function(n){return w(n)},h.allocUnsafeSlow=function(n){return w(n)};function S(n,t){if((typeof t!="string"||t==="")&&(t="utf8"),!h.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const e=U(n,t)|0;let r=p(e);const u=r.write(n,t);return u!==e&&(r=r.slice(0,u)),r}function I(n){const t=n.length<0?0:M(n.length)|0,e=p(t);for(let r=0;r<t;r+=1)e[r]=n[r]&255;return e}function B(n){if($(n,Uint8Array)){const t=new Uint8Array(n);return O(t.buffer,t.byteOffset,t.byteLength)}return I(n)}function O(n,t,e){if(t<0||n.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let r;return t===void 0&&e===void 0?r=new Uint8Array(n):e===void 0?r=new Uint8Array(n,t):r=new Uint8Array(n,t,e),Object.setPrototypeOf(r,h.prototype),r}function x(n){if(h.isBuffer(n)){const t=M(n.length)|0,e=p(t);return e.length===0||n.copy(e,0,0,t),e}if(n.length!==void 0)return typeof n.length!="number"||it(n.length)?p(0):I(n);if(n.type==="Buffer"&&Array.isArray(n.data))return I(n.data)}function M(n){if(n>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return n|0}function V(n){return+n!=n&&(n=0),h.alloc(+n)}h.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==h.prototype},h.compare=function(t,e){if($(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),$(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,u=e.length;for(let f=0,d=Math.min(r,u);f<d;++f)if(t[f]!==e[f]){r=t[f],u=e[f];break}return r<u?-1:u<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return h.alloc(0);let r;if(e===void 0)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const u=h.allocUnsafe(e);let f=0;for(r=0;r<t.length;++r){let d=t[r];if($(d,Uint8Array))f+d.length>u.length?(h.isBuffer(d)||(d=h.from(d)),d.copy(u,f)):Uint8Array.prototype.set.call(u,d,f);else if(h.isBuffer(d))d.copy(u,f);else throw new TypeError('"list" argument must be an Array of Buffers');f+=d.length}return u};function U(n,t){if(h.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||$(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);const e=n.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&e===0)return 0;let u=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return rt(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return At(n).length;default:if(u)return r?-1:rt(n).length;t=(""+t).toLowerCase(),u=!0}}h.byteLength=U;function et(n,t,e){let r=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(n||(n="utf8");;)switch(n){case"hex":return Gt(this,t,e);case"utf8":case"utf-8":return gt(this,t,e);case"ascii":return Wt(this,t,e);case"latin1":case"binary":return jt(this,t,e);case"base64":return Vt(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Yt(this,t,e);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),r=!0}}h.prototype._isBuffer=!0;function R(n,t,e){const r=n[t];n[t]=n[e],n[e]=r}h.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)R(this,e,e+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)R(this,e,e+3),R(this,e+1,e+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)R(this,e,e+7),R(this,e+1,e+6),R(this,e+2,e+5),R(this,e+3,e+4);return this},h.prototype.toString=function(){const t=this.length;return t===0?"":arguments.length===0?gt(this,0,t):et.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:h.compare(this,t)===0},h.prototype.inspect=function(){let t="";const e=s.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},c&&(h.prototype[c]=h.prototype.inspect),h.prototype.compare=function(t,e,r,u,f){if($(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),r===void 0&&(r=t?t.length:0),u===void 0&&(u=0),f===void 0&&(f=this.length),e<0||r>t.length||u<0||f>this.length)throw new RangeError("out of range index");if(u>=f&&e>=r)return 0;if(u>=f)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,u>>>=0,f>>>=0,this===t)return 0;let d=f-u,E=r-e;const _=Math.min(d,E),P=this.slice(u,f),C=t.slice(e,r);for(let A=0;A<_;++A)if(P[A]!==C[A]){d=P[A],E=C[A];break}return d<E?-1:E<d?1:0};function pt(n,t,e,r,u){if(n.length===0)return-1;if(typeof e=="string"?(r=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,it(e)&&(e=u?0:n.length-1),e<0&&(e=n.length+e),e>=n.length){if(u)return-1;e=n.length-1}else if(e<0)if(u)e=0;else return-1;if(typeof t=="string"&&(t=h.from(t,r)),h.isBuffer(t))return t.length===0?-1:dt(n,t,e,r,u);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?u?Uint8Array.prototype.indexOf.call(n,t,e):Uint8Array.prototype.lastIndexOf.call(n,t,e):dt(n,[t],e,r,u);throw new TypeError("val must be string, number or Buffer")}function dt(n,t,e,r,u){let f=1,d=n.length,E=t.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(n.length<2||t.length<2)return-1;f=2,d/=2,E/=2,e/=2}function _(C,A){return f===1?C[A]:C.readUInt16BE(A*f)}let P;if(u){let C=-1;for(P=e;P<d;P++)if(_(n,P)===_(t,C===-1?0:P-C)){if(C===-1&&(C=P),P-C+1===E)return C*f}else C!==-1&&(P-=P-C),C=-1}else for(e+E>d&&(e=d-E),P=e;P>=0;P--){let C=!0;for(let A=0;A<E;A++)if(_(n,P+A)!==_(t,A)){C=!1;break}if(C)return P}return-1}h.prototype.includes=function(t,e,r){return this.indexOf(t,e,r)!==-1},h.prototype.indexOf=function(t,e,r){return pt(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return pt(this,t,e,r,!1)};function Dt(n,t,e,r){e=Number(e)||0;const u=n.length-e;r?(r=Number(r),r>u&&(r=u)):r=u;const f=t.length;r>f/2&&(r=f/2);let d;for(d=0;d<r;++d){const E=parseInt(t.substr(d*2,2),16);if(it(E))return d;n[e+d]=E}return d}function Lt(n,t,e,r){return Q(rt(t,n.length-e),n,e,r)}function kt(n,t,e,r){return Q(Xt(t),n,e,r)}function $t(n,t,e,r){return Q(At(t),n,e,r)}function Jt(n,t,e,r){return Q(Qt(t,n.length-e),n,e,r)}h.prototype.write=function(t,e,r,u){if(e===void 0)u="utf8",r=this.length,e=0;else if(r===void 0&&typeof e=="string")u=e,r=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(r)?(r=r>>>0,u===void 0&&(u="utf8")):(u=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const f=this.length-e;if((r===void 0||r>f)&&(r=f),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");u||(u="utf8");let d=!1;for(;;)switch(u){case"hex":return Dt(this,t,e,r);case"utf8":case"utf-8":return Lt(this,t,e,r);case"ascii":case"latin1":case"binary":return kt(this,t,e,r);case"base64":return $t(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Jt(this,t,e,r);default:if(d)throw new TypeError("Unknown encoding: "+u);u=(""+u).toLowerCase(),d=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Vt(n,t,e){return t===0&&e===n.length?i.fromByteArray(n):i.fromByteArray(n.slice(t,e))}function gt(n,t,e){e=Math.min(n.length,e);const r=[];let u=t;for(;u<e;){const f=n[u];let d=null,E=f>239?4:f>223?3:f>191?2:1;if(u+E<=e){let _,P,C,A;switch(E){case 1:f<128&&(d=f);break;case 2:_=n[u+1],(_&192)===128&&(A=(f&31)<<6|_&63,A>127&&(d=A));break;case 3:_=n[u+1],P=n[u+2],(_&192)===128&&(P&192)===128&&(A=(f&15)<<12|(_&63)<<6|P&63,A>2047&&(A<55296||A>57343)&&(d=A));break;case 4:_=n[u+1],P=n[u+2],C=n[u+3],(_&192)===128&&(P&192)===128&&(C&192)===128&&(A=(f&15)<<18|(_&63)<<12|(P&63)<<6|C&63,A>65535&&A<1114112&&(d=A))}}d===null?(d=65533,E=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|d&1023),r.push(d),u+=E}return vt(r)}const yt=4096;function vt(n){const t=n.length;if(t<=yt)return String.fromCharCode.apply(String,n);let e="",r=0;for(;r<t;)e+=String.fromCharCode.apply(String,n.slice(r,r+=yt));return e}function Wt(n,t,e){let r="";e=Math.min(n.length,e);for(let u=t;u<e;++u)r+=String.fromCharCode(n[u]&127);return r}function jt(n,t,e){let r="";e=Math.min(n.length,e);for(let u=t;u<e;++u)r+=String.fromCharCode(n[u]);return r}function Gt(n,t,e){const r=n.length;(!t||t<0)&&(t=0),(!e||e<0||e>r)&&(e=r);let u="";for(let f=t;f<e;++f)u+=Kt[n[f]];return u}function Yt(n,t,e){const r=n.slice(t,e);let u="";for(let f=0;f<r.length-1;f+=2)u+=String.fromCharCode(r[f]+r[f+1]*256);return u}h.prototype.slice=function(t,e){const r=this.length;t=~~t,e=e===void 0?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);const u=this.subarray(t,e);return Object.setPrototypeOf(u,h.prototype),u};function T(n,t,e){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+t>e)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,r){t=t>>>0,e=e>>>0,r||T(t,e,this.length);let u=this[t],f=1,d=0;for(;++d<e&&(f*=256);)u+=this[t+d]*f;return u},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,r){t=t>>>0,e=e>>>0,r||T(t,e,this.length);let u=this[t+--e],f=1;for(;e>0&&(f*=256);)u+=this[t+--e]*f;return u},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t=t>>>0,e||T(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t=t>>>0,e||T(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t=t>>>0,e||T(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t=t>>>0,e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t=t>>>0,e||T(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=v(function(t){t=t>>>0,G(t,"offset");const e=this[t],r=this[t+7];(e===void 0||r===void 0)&&H(t,this.length-8);const u=e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,f=this[++t]+this[++t]*2**8+this[++t]*2**16+r*2**24;return BigInt(u)+(BigInt(f)<<BigInt(32))}),h.prototype.readBigUInt64BE=v(function(t){t=t>>>0,G(t,"offset");const e=this[t],r=this[t+7];(e===void 0||r===void 0)&&H(t,this.length-8);const u=e*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],f=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+r;return(BigInt(u)<<BigInt(32))+BigInt(f)}),h.prototype.readIntLE=function(t,e,r){t=t>>>0,e=e>>>0,r||T(t,e,this.length);let u=this[t],f=1,d=0;for(;++d<e&&(f*=256);)u+=this[t+d]*f;return f*=128,u>=f&&(u-=Math.pow(2,8*e)),u},h.prototype.readIntBE=function(t,e,r){t=t>>>0,e=e>>>0,r||T(t,e,this.length);let u=e,f=1,d=this[t+--u];for(;u>0&&(f*=256);)d+=this[t+--u]*f;return f*=128,d>=f&&(d-=Math.pow(2,8*e)),d},h.prototype.readInt8=function(t,e){return t=t>>>0,e||T(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},h.prototype.readInt16LE=function(t,e){t=t>>>0,e||T(t,2,this.length);const r=this[t]|this[t+1]<<8;return r&32768?r|4294901760:r},h.prototype.readInt16BE=function(t,e){t=t>>>0,e||T(t,2,this.length);const r=this[t+1]|this[t]<<8;return r&32768?r|4294901760:r},h.prototype.readInt32LE=function(t,e){return t=t>>>0,e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t=t>>>0,e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=v(function(t){t=t>>>0,G(t,"offset");const e=this[t],r=this[t+7];(e===void 0||r===void 0)&&H(t,this.length-8);const u=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(r<<24);return(BigInt(u)<<BigInt(32))+BigInt(e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}),h.prototype.readBigInt64BE=v(function(t){t=t>>>0,G(t,"offset");const e=this[t],r=this[t+7];(e===void 0||r===void 0)&&H(t,this.length-8);const u=(e<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(u)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+r)}),h.prototype.readFloatLE=function(t,e){return t=t>>>0,e||T(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t=t>>>0,e||T(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t=t>>>0,e||T(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t=t>>>0,e||T(t,8,this.length),o.read(this,t,!1,52,8)};function b(n,t,e,r,u,f){if(!h.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>u||t<f)throw new RangeError('"value" argument is out of bounds');if(e+r>n.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,r,u){if(t=+t,e=e>>>0,r=r>>>0,!u){const E=Math.pow(2,8*r)-1;b(this,t,e,r,E,0)}let f=1,d=0;for(this[e]=t&255;++d<r&&(f*=256);)this[e+d]=t/f&255;return e+r},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,r,u){if(t=+t,e=e>>>0,r=r>>>0,!u){const E=Math.pow(2,8*r)-1;b(this,t,e,r,E,0)}let f=r-1,d=1;for(this[e+f]=t&255;--f>=0&&(d*=256);)this[e+f]=t/d&255;return e+r},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,r){return t=+t,e=e>>>0,r||b(this,t,e,1,255,0),this[e]=t&255,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e=e>>>0,r||b(this,t,e,2,65535,0),this[e]=t&255,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e=e>>>0,r||b(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=t&255,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e=e>>>0,r||b(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e=e>>>0,r||b(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};function wt(n,t,e,r,u){St(t,r,u,n,e,7);let f=Number(t&BigInt(4294967295));n[e++]=f,f=f>>8,n[e++]=f,f=f>>8,n[e++]=f,f=f>>8,n[e++]=f;let d=Number(t>>BigInt(32)&BigInt(4294967295));return n[e++]=d,d=d>>8,n[e++]=d,d=d>>8,n[e++]=d,d=d>>8,n[e++]=d,e}function mt(n,t,e,r,u){St(t,r,u,n,e,7);let f=Number(t&BigInt(4294967295));n[e+7]=f,f=f>>8,n[e+6]=f,f=f>>8,n[e+5]=f,f=f>>8,n[e+4]=f;let d=Number(t>>BigInt(32)&BigInt(4294967295));return n[e+3]=d,d=d>>8,n[e+2]=d,d=d>>8,n[e+1]=d,d=d>>8,n[e]=d,e+8}h.prototype.writeBigUInt64LE=v(function(t,e=0){return wt(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=v(function(t,e=0){return mt(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(t,e,r,u){if(t=+t,e=e>>>0,!u){const _=Math.pow(2,8*r-1);b(this,t,e,r,_-1,-_)}let f=0,d=1,E=0;for(this[e]=t&255;++f<r&&(d*=256);)t<0&&E===0&&this[e+f-1]!==0&&(E=1),this[e+f]=(t/d>>0)-E&255;return e+r},h.prototype.writeIntBE=function(t,e,r,u){if(t=+t,e=e>>>0,!u){const _=Math.pow(2,8*r-1);b(this,t,e,r,_-1,-_)}let f=r-1,d=1,E=0;for(this[e+f]=t&255;--f>=0&&(d*=256);)t<0&&E===0&&this[e+f+1]!==0&&(E=1),this[e+f]=(t/d>>0)-E&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e=e>>>0,r||b(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=t&255,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e=e>>>0,r||b(this,t,e,2,32767,-32768),this[e]=t&255,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e=e>>>0,r||b(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=t&255,e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e=e>>>0,r||b(this,t,e,4,2147483647,-2147483648),this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e=e>>>0,r||b(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4},h.prototype.writeBigInt64LE=v(function(t,e=0){return wt(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=v(function(t,e=0){return mt(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function xt(n,t,e,r,u,f){if(e+r>n.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Et(n,t,e,r,u){return t=+t,e=e>>>0,u||xt(n,t,e,4),o.write(n,t,e,r,23,4),e+4}h.prototype.writeFloatLE=function(t,e,r){return Et(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return Et(this,t,e,!1,r)};function It(n,t,e,r,u){return t=+t,e=e>>>0,u||xt(n,t,e,8),o.write(n,t,e,r,52,8),e+8}h.prototype.writeDoubleLE=function(t,e,r){return It(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return It(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,u){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),!u&&u!==0&&(u=this.length),e>=t.length&&(e=t.length),e||(e=0),u>0&&u<r&&(u=r),u===r||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("sourceEnd out of bounds");u>this.length&&(u=this.length),t.length-e<u-r&&(u=t.length-e+r);const f=u-r;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,r,u):Uint8Array.prototype.set.call(t,this.subarray(r,u),e),f},h.prototype.fill=function(t,e,r,u){if(typeof t=="string"){if(typeof e=="string"?(u=e,e=0,r=this.length):typeof r=="string"&&(u=r,r=this.length),u!==void 0&&typeof u!="string")throw new TypeError("encoding must be a string");if(typeof u=="string"&&!h.isEncoding(u))throw new TypeError("Unknown encoding: "+u);if(t.length===1){const d=t.charCodeAt(0);(u==="utf8"&&d<128||u==="latin1")&&(t=d)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e=e>>>0,r=r===void 0?this.length:r>>>0,t||(t=0);let f;if(typeof t=="number")for(f=e;f<r;++f)this[f]=t;else{const d=h.isBuffer(t)?t:h.from(t,u),E=d.length;if(E===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(f=0;f<r-e;++f)this[f+e]=d[f%E]}return this};const j={};function nt(n,t,e){j[n]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${n}]`,this.stack,delete this.name}get code(){return n}set code(u){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:u,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}nt("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),nt("ERR_INVALID_ARG_TYPE",function(n,t){return`The "${n}" argument must be of type number. Received type ${typeof t}`},TypeError),nt("ERR_OUT_OF_RANGE",function(n,t,e){let r=`The value of "${n}" is out of range.`,u=e;return Number.isInteger(e)&&Math.abs(e)>2**32?u=Bt(String(e)):typeof e=="bigint"&&(u=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(u=Bt(u)),u+="n"),r+=` It must be ${t}. Received ${u}`,r},RangeError);function Bt(n){let t="",e=n.length;const r=n[0]==="-"?1:0;for(;e>=r+4;e-=3)t=`_${n.slice(e-3,e)}${t}`;return`${n.slice(0,e)}${t}`}function Ht(n,t,e){G(t,"offset"),(n[t]===void 0||n[t+e]===void 0)&&H(t,n.length-(e+1))}function St(n,t,e,r,u,f){if(n>e||n<t){const d=typeof t=="bigint"?"n":"";let E;throw f>3?t===0||t===BigInt(0)?E=`>= 0${d} and < 2${d} ** ${(f+1)*8}${d}`:E=`>= -(2${d} ** ${(f+1)*8-1}${d}) and < 2 ** ${(f+1)*8-1}${d}`:E=`>= ${t}${d} and <= ${e}${d}`,new j.ERR_OUT_OF_RANGE("value",E,n)}Ht(r,u,f)}function G(n,t){if(typeof n!="number")throw new j.ERR_INVALID_ARG_TYPE(t,"number",n)}function H(n,t,e){throw Math.floor(n)!==n?(G(n,e),new j.ERR_OUT_OF_RANGE(e||"offset","an integer",n)):t<0?new j.ERR_BUFFER_OUT_OF_BOUNDS:new j.ERR_OUT_OF_RANGE(e||"offset",`>= ${e?1:0} and <= ${t}`,n)}const qt=/[^+/0-9A-Za-z-_]/g;function zt(n){if(n=n.split("=")[0],n=n.trim().replace(qt,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function rt(n,t){t=t||1/0;let e;const r=n.length;let u=null;const f=[];for(let d=0;d<r;++d){if(e=n.charCodeAt(d),e>55295&&e<57344){if(!u){if(e>56319){(t-=3)>-1&&f.push(239,191,189);continue}else if(d+1===r){(t-=3)>-1&&f.push(239,191,189);continue}u=e;continue}if(e<56320){(t-=3)>-1&&f.push(239,191,189),u=e;continue}e=(u-55296<<10|e-56320)+65536}else u&&(t-=3)>-1&&f.push(239,191,189);if(u=null,e<128){if((t-=1)<0)break;f.push(e)}else if(e<2048){if((t-=2)<0)break;f.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;f.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;f.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return f}function Xt(n){const t=[];for(let e=0;e<n.length;++e)t.push(n.charCodeAt(e)&255);return t}function Qt(n,t){let e,r,u;const f=[];for(let d=0;d<n.length&&!((t-=2)<0);++d)e=n.charCodeAt(d),r=e>>8,u=e%256,f.push(u),f.push(r);return f}function At(n){return i.toByteArray(zt(n))}function Q(n,t,e,r){let u;for(u=0;u<r&&!(u+e>=t.length||u>=n.length);++u)t[u+e]=n[u];return u}function $(n,t){return n instanceof t||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===t.name}function it(n){return n!==n}const Kt=function(){const n="0123456789abcdef",t=new Array(256);for(let e=0;e<16;++e){const r=e*16;for(let u=0;u<16;++u)t[r+u]=n[e]+n[u]}return t}();function v(n){return typeof BigInt>"u"?Zt:n}function Zt(){throw new Error("BigInt not supported")}})(bt);const Te=3e4,Ne=6e4,Oe=6e4;class be extends ft{constructor(o,c={}){super();F(this,"peer");F(this,"maxConnections",6);F(this,"syncMS",Te);F(this,"messageLastSeenDeleteMS",Ne);F(this,"replaceOldPeerMS",Oe);F(this,"messageId",0);F(this,"messages",new Map);F(this,"connections",new Map);F(this,"payloadsToSend",[]);F(this,"syncTimeoutId");F(this,"onData",(o,c)=>{if(typeof o=="string"||bt.Buffer.isBuffer(o)){const a=JSON.parse(o.toString()),l=`${a.from}-${a.id}`;this.messages.has(l)||(this.messages.set(l,Date.now()),this.peer.broadcast(o),this.emit("data",a.payload,a.from))}});F(this,"onDiscover",o=>{if(!this.peer.getConnections().has(o))if(this.needsConnection())this.peer.connectToInBackground(o);else{const c=Re(this.connections.entries());if(c){const[a,l]=c;l<Date.now()-this.replaceOldPeerMS&&this.peer.connectTo(o).then(()=>this.peer.disconnectFrom(a))}}});F(this,"onConnection",(o,c)=>{this.payloadsToSend.length&&(this.payloadsToSend.forEach(a=>this.broadcastInternal(a)),this.payloadsToSend.length=0),this.connections.set(c,Date.now())});F(this,"onDisconnection",(o,c)=>{this.needsConnection()&&this.peer.announce(),this.connections.delete(c)});F(this,"onDisconnect",()=>{this.connections.clear(),this.syncTimeoutId&&(clearTimeout(this.syncTimeoutId),this.syncTimeoutId=void 0)});F(this,"onSync",()=>{this.needsConnection()&&this.peer.announce(),this.cleanOldMessages(),this.syncTimeoutId=void 0,this.sync()});F(this,"sync",()=>{this.syncTimeoutId=setTimeout(this.onSync,this.syncMS*.5+Math.random()*this.syncMS*.5)});this.peer=o,this.peer.on("data",this.onData),this.peer.on("join",this.onDiscover),this.peer.on("announce",this.onDiscover),this.peer.on("connection",this.onConnection),this.peer.on("disconnection",this.onDisconnection),this.peer.on("connect",this.onSync),this.peer.on("disconnect",this.onDisconnect),typeof c.maxConnections=="number"&&c.maxConnections>0&&(this.maxConnections=c.maxConnections),typeof c.syncMS=="number"&&c.syncMS>5e3&&(this.syncMS=c.syncMS),typeof c.messageLastSeenDeleteMS=="number"&&c.messageLastSeenDeleteMS>0&&(this.messageLastSeenDeleteMS=c.messageLastSeenDeleteMS),typeof c.replaceOldPeerMS=="number"&&c.replaceOldPeerMS>0&&(this.replaceOldPeerMS=c.replaceOldPeerMS),this.peer.isConnected()&&this.onSync()}getPeer(){return this.peer}broadcast(o){if(this.connections.size===0)this.payloadsToSend.push(o);else return this.broadcastInternal(o)}broadcastInternal(o){const c=this.peer.getId(),a=this.messageId++,l=`${c}-${a}`;return this.messages.set(l,Date.now()),this.peer.broadcast(JSON.stringify({id:a,from:c,payload:o})),this}needsConnection(){return this.connections.size<this.maxConnections}cleanOldMessages(){if(this.messages.size){const o=Date.now();for(const[c,a]of this.messages.entries())o-a>this.messageLastSeenDeleteMS&&this.messages.delete(c)}}}function Re(s){let i=Number.MAX_SAFE_INTEGER,o;for(const c of s){const a=c[1];a<i&&(i=a,o=c)}return o}class Me extends ft{constructor(o,c){super();F(this,"socket");F(this,"connections",new Map);F(this,"SimplePeer");F(this,"onSignal",(o,c)=>{let a=this.connections.get(c);o.type==="offer"&&(a!=null&&a.initiator)&&(this.disconnectFrom(c,!1),a=void 0),a||(a=this.createConnection(c,!1)),a.destroyed||a.signal(o)});F(this,"onConnect",()=>{this.emit("connect",this.socket.id)});F(this,"onDisonnect",()=>{this.emit("disconnect");for(const[o,c]of this.connections.entries())this.emit("disconnection",c,o),c.destroy();this.connections.clear()});F(this,"onJoin",o=>{o!==this.socket.id&&this.emit("join",o)});F(this,"onAnnounce",o=>{o!==this.socket.id&&this.emit("announce",o)});F(this,"onLeave",(o,c)=>{this.disconnectFrom(o)});this.SimplePeer=c,this.socket=o,this.socket.on("signal",this.onSignal),this.socket.on("connect",this.onConnect),this.socket.on("disconnect",this.onDisonnect),this.socket.on("join",this.onJoin),this.socket.on("announce",this.onAnnounce),this.socket.on("leave",this.onLeave)}getId(){return this.socket.id}isConnected(){return this.socket.connected}connected(){return Ut(this.socket)}getConnections(){return this.connections}send(o,c){const a=this.connections.get(o);return a!=null&&a.connected&&a.send(c),this}broadcast(o){for(const c of this.connections.values())c.connected&&c.send(o);return this}announce(){return this.socket.emit("announce"),this}get(o){return this.connections.get(o)}connectToInBackground(o){return this.getOrCreateConnection(o,!0),this}connectTo(o){return Ut(this.getOrCreateConnection(o,!0))}disconnectFrom(o,c=!0){const a=this.connections.get(o);return a&&(c&&this.emit("disconnection",a,o),this.connections.delete(o),a.destroy()),this}getOrCreateConnection(o,c){const a=this.connections.get(o);return a||this.createConnection(o,c)}createConnection(o,c){const a=new this.SimplePeer({initiator:c,trickle:!1});return a.on("signal",l=>{this.socket.emit("signal",o,l)}),a.on("data",l=>{this.emit("data",l,o)}),a.on("error",l=>{this.disconnectFrom(o),this.emit("error",l)}),a.on("connect",()=>{this.emit("connection",a,o)}),a.on("disconnect",()=>{this.disconnectFrom(o)}),this.connections.set(o,a),a}}function Ut(s){return new Promise((i,o)=>{if(s.connected)i(s);else{let c=function(){p(),i(s)},a=function(){p(),o()},l=function(h){p(),o(h)},p=function(){s.off("connect",c),s.off("disconnect",a),s.off("error",l)};s.once("connect",c),s.once("disconnect",a),s.once("error",l)}})}const Qe=["red","blue","green","yellow","purple","orange","white","black","brown"],De={};function Ke(s){let i=De[s];if(!i){i=new Ee;const o=new Me(window.io(`wss://mesh.aicacia.com/io-github-trivia-${s}`,{transports:["websocket"],withCredentials:!0}),window.SimplePeer),c=new be(o);c.on("data",a=>{if("json"in a)i.merge(a.path,a.json);else{const l=i.getNodeAtPath(a.path);l&&c.broadcast({path:l.getPath(),json:l.toJSON()})}}),i.on("set",(a,l)=>{c.broadcast({path:a,json:l})}).on("get",a=>{c.broadcast({path:a})})}return i}const ct={};function Le(s){return s}function ke(s){return s}function $e(s,i,o={}){const c=typeof window<"u"&&typeof window.localStorage<"u",a=o.toJSON||ke,l=o.fromJSON||Le;function p(h,g){return c&&window.localStorage.setItem(h,JSON.stringify(a(g))),g}if(!ct[s]){let y=function(w){p(s,w),m(w)};const h=ne(i,w=>{const S=c?window.localStorage.getItem(s):null;if(S?w(l(JSON.parse(S))):p(s,i),c){let I=function(B){B.key===s&&w(B.newValue?l(JSON.parse(B.newValue)):null)};return window.addEventListener("storage",I),()=>{window.removeEventListener("storage",I)}}}),{subscribe:g,set:m}=h;ct[s]={set:y,update(w){y(w(ie(h)))},subscribe:g}}return ct[s]}let K;const Je=new Uint8Array(16);function Ve(){if(!K&&(K=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!K))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return K(Je)}const N=[];for(let s=0;s<256;++s)N.push((s+256).toString(16).slice(1));function ve(s,i=0){return(N[s[i+0]]+N[s[i+1]]+N[s[i+2]]+N[s[i+3]]+"-"+N[s[i+4]]+N[s[i+5]]+"-"+N[s[i+6]]+N[s[i+7]]+"-"+N[s[i+8]]+N[s[i+9]]+"-"+N[s[i+10]]+N[s[i+11]]+N[s[i+12]]+N[s[i+13]]+N[s[i+14]]+N[s[i+15]]).toLowerCase()}const We=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_t={randomUUID:We};function je(s,i,o){if(_t.randomUUID&&!i&&!s)return _t.randomUUID();s=s||{};const c=s.random||(s.rng||Ve)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,i){o=o||0;for(let a=0;a<16;++a)i[o+a]=c[a];return i}return ve(c)}const Ge=$e("user_id",je()),Ze=re(Ge,s=>s),Mt="https://opentdb.com",tn=["easy","medium","hard"];async function en({token:s,amount:i,category:o,difficulty:c,type:a}={}){const l=new URL(`${Mt}/api.php`);s&&l.searchParams.set("token",s),l.searchParams.set("amount",Math.min(Math.max(i||20,5),20).toString()),o&&l.searchParams.set("category",o.toString()),c&&l.searchParams.set("difficulty",c),a&&l.searchParams.set("tags",a);const p=await fetch(l);if(p.ok)return(await p.json()).results.reduce((g,m)=>{const y=m;return y.incorrect_answers=m.incorrect_answers.reduce((w,S,I)=>(w[I]=S,w),{}),g[fe(y)]=y,g},{});throw p}async function nn(){const s=await fetch(`${Mt}/api_token.php?command=request`);if(s.ok)return(await s.json()).token;throw s}export{Qe as C,tn as Q,en as a,nn as b,Ke as g,Ze as u};
